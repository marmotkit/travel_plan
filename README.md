# 旅行計劃系統

這是一個基於 React 和 TypeScript 開發的旅行計劃管理應用程式，幫助用戶管理、組織和追蹤他們的旅行專案。

## 系統功能

### 使用者管理
- **登入與權限控制**：基本的使用者登入功能，支援管理員與一般使用者角色區分
- **權限管理**：管理員可以切換管理模式，進行更多權限操作
- **用戶列表**：管理員可查看所有用戶，支援搜尋、過濾與排序功能
- **用戶詳情**：查看與編輯用戶的完整個人資料
- **狀態管理**：啟用/停用用戶帳號
- **角色分配**：將用戶指派為管理員或一般用戶
- **密碼管理**：管理員可為用戶重設密碼
- **登入追蹤**：記錄用戶最後登入時間和活動

### 旅程管理
- **旅程列表**：檢視所有旅程，包含標題、目的地、日期和狀態
- **旅程篩選**：按照旅程狀態（即將到來、進行中、已完成、已取消）進行篩選
- **旅程搜尋**：根據旅程標題和目的地進行關鍵字搜尋

### 旅程詳情
- **詳細資訊**：顯示旅程的完整資訊，包括描述、預算、類別等
- **參與者管理**：查看參與旅程的所有人員及其聯絡資訊
- **編輯與刪除**：支援編輯現有旅程或刪除不需要的旅程

### 旅程表單
- **創建新旅程**：填寫完整的旅程資訊，包括標題、目的地、日期等必要欄位
- **編輯旅程**：修改已存在的旅程資訊
- **參與者添加/移除**：管理旅程的參與人員
- **類別選擇**：從多個預設類別中選擇旅程類型

### 行程管理
- **行程日列表**：查看旅程內的每日行程安排
- **行程日詳情**：包含日期、標題、描述和當日活動
- **行程日表單**：創建和編輯行程日，支援多種信息輸入
- **活動管理**：為每個行程日添加多個活動，包含時間、地點、類別等
- **住宿整合**：將住宿安排與特定行程日關聯
- **時間軸視圖**：行程日按時間順序排列，便於規劃
- **活動類別**：支援多種活動類別（觀光景點、交通、餐飲、住宿等）
- **地點和時間管理**：記錄活動的確切地點和時間範圍
- **費用跟蹤**：為每個活動記錄預算和實際花費

### 交通管理
- **多種交通類型**：支援機票、高鐵、租車、計程車和包車等多種交通方式管理
- **交通詳細資訊**：記錄出發/到達時間、地點、費用、訂票參考號等完整資訊
- **按行程日分類**：交通項目與行程日關聯，便於按日期規劃
- **連續交通安排**：支援添加連續的多段交通，如轉機、接駁等
- **狀態追蹤**：管理交通預訂狀態（待確認、已確認、已取消）
- **視覺化顯示**：直觀顯示出發和到達信息，以及連接關係
- **類型特定欄位**：根據不同交通類型顯示專屬欄位（航班號、車次、車型等）
- **費用管理**：記錄各類交通的費用和貨幣類型

### 住宿管理
- **多種住宿類型**：支援飯店、背包客棧、公寓、度假村、民宿和 Airbnb 等多種住宿方式
- **住宿詳細資訊**：記錄入住/退房時間、地址、費用、訂房參考號等完整資訊
- **按行程日分類**：住宿項目與行程日關聯，便於按日期規劃
- **房間資訊管理**：記錄房型、房間數量、入住人數等詳細信息
- **狀態追蹤**：管理住宿預訂狀態（待確認、已確認、已取消）
- **設施列表**：記錄住宿提供的各種設施（Wi-Fi、停車場、游泳池等）
- **位置信息**：支援添加 Google Maps 連結，方便查看住宿位置
- **聯絡方式**：儲存住宿的電話和電子郵件等聯絡信息
- **費用管理**：記錄住宿的總價格、每晚價格和貨幣類型

### 餐飲管理
- **多種餐飲類型**：支援早餐、午餐、晚餐、早午餐、下午茶和小吃等多種餐飲類別
- **餐廳類別管理**：分類記錄當地美食、國際料理、中式料理、日式料理等各種餐廳類型
- **餐飲詳細資訊**：記錄餐廳名稱、地址、預訂時間、最晚到達時間、預訂狀態等完整資訊
- **按行程日分類**：餐飲項目與行程日關聯，便於按日期規劃
- **人數與費用管理**：記錄用餐人數、預估費用和貨幣類型
- **特殊飲食管理**：支援素食、全素、無麩質、無堅果、無乳製品等特殊飲食需求標記
- **推薦菜品功能**：可記錄多項推薦菜品，方便點餐參考
- **餐廳評分系統**：支援 1-5 星評分，記錄個人對餐廳的評價
- **聯絡與位置信息**：儲存餐廳的電話、電子郵件和網站，並支援添加 Google Maps 連結
- **狀態追蹤**：管理餐廳預訂狀態（待確認、已確認、已取消）

### 證件管理
- **個人證件管理**：支援多種證件類型（護照、身份證、駕照等）的集中管理
- **旅遊簽證管理**：詳細記錄各國簽證的申請狀態、發放和到期日期
- **同行人員證件管理**：允許管理同行者的證件信息，便於團體旅行時的證件管理
- **到期提醒**：智能識別即將到期的證件（90天內），並提供視覺警示
- **簽證申請狀態追蹤**：記錄簽證的申請、批准和拒絕狀態
- **證件照片加密存儲**：提供照片加密功能，保護敏感證件信息
- **簽證類型管理**：支援多種簽證類型（旅遊、商務、學生、工作、過境等）
- **入境次數與停留時間記錄**：管理簽證允許的入境次數（單次、兩次、多次）和停留天數
- **證件搜索與過濾**：按證件類型、擁有者和有效期快速查找證件
- **關聯旅程管理**：將簽證與特定旅程關聯，方便行前準備

### 儀表板
- **總覽視圖**：概述所有旅程狀態和即將到來的旅行

### 預算管理
- **旅程預算設定**：為每個旅程建立詳細的預算計劃，並設定總預算上限
- **分類預算配置**：將預算分配到不同類別（交通、住宿、餐飲、景點門票、購物等）
- **預算使用追蹤**：實時監控各類別的預算使用情況，並提供視覺化進度條
- **支出記錄**：記錄每筆實際支出，並自動計算預算使用進度
- **額外預算管理**：支援設定額外預算，處理意外或超出計劃的支出
- **支出分析**：查看支出統計圖表，包括類別分佈和每日支出趨勢
- **支出過濾與搜尋**：根據類別、日期、金額等條件篩選支出記錄
- **多幣種支援**：支援多種貨幣的預算和支出記錄
- **改進的用戶界面**：優化的按鈕和控件設計，提高操作可見度和用戶體驗
- **智能認證檢查**：改進的用戶認證邏輯，確保資料在用戶登入狀態下安全加載

## 技術組件

- **前端框架**：React 18
- **程式語言**：TypeScript
- **路由管理**：React Router v6
- **狀態管理**：React Hooks (useState, useEffect)
- **樣式框架**：Tailwind CSS
- **數據存儲**：localStorage（客戶端本地存儲）
- **圖標庫**：Font Awesome
- **唯一識別碼**：UUID

## 目前進度

### 已完成功能
- ✅ 使用者登入/驗證系統
- ✅ 用戶管理模組（列表、詳情、編輯、權限控制）
- ✅ 密碼管理與安全設定
- ✅ 旅程列表頁面，支援搜尋和篩選功能
- ✅ 旅程詳情頁面，展示完整的旅程資訊
- ✅ 旅程表單，用於創建和編輯旅程
- ✅ 參與者管理系統
- ✅ 類別選擇功能
- ✅ 本地數據持久化
- ✅ 行程管理功能，包含行程日和活動管理
- ✅ 行程日表單，支援多種類型活動創建和編輯
- ✅ 活動時間安排和地點管理
- ✅ 交通管理功能，支援多種交通方式和連續交通安排
- ✅ 住宿管理功能，支援多種住宿類型和設施記錄
- ✅ 餐飲管理功能，支援多種餐飲類型、餐廳類別和特殊飲食需求管理
- ✅ 證件管理功能，支援個人和同行人員的證件與簽證管理，並提供照片加密保護
- ✅ 預算管理功能，支援旅程預算設定、分類預算配置、支出記錄、預算使用分析等

### 待開發功能
- ⬜ 後端 API 整合，替代 localStorage
- ⬜ 用戶註冊功能
- ⬜ 照片上傳和管理
- ⬜ 地圖整合
- ⬜ 預算跟踪和分析
- ⬜ 消息通知系統

## 安裝與運行

### 前置需求
- Node.js (v14.0.0 或更高版本)
- npm (v6.0.0 或更高版本)

### 安裝步驟

```bash
# 克隆儲存庫
git clone https://github.com/your-username/travel-plan.git

# 切換到專案目錄
cd travel-plan

# 安裝依賴
npm install

# 啟動開發伺服器
npm start
```

開發伺服器啟動後，打開瀏覽器訪問 [http://localhost:3000](http://localhost:3000) 即可查看應用程式。

### 構建生產版本

```bash
# 構建應用程式
npm run build
```

構建後的文件將位於 `build` 目錄中，可以部署到任何靜態文件服務器。

## 使用說明

### 管理員帳號
- **電子郵件**: test@example.com
- **密碼**: password123

### 用戶管理
1. 登入系統後，管理員可以在左側選單中點擊「用戶管理」
2. 在用戶列表頁面，可以查看所有用戶，並支援搜尋和過濾功能
3. 點擊用戶卡片可查看詳細資訊，並進行編輯、停用或刪除操作
4. 在安全設定標籤頁中，可以重設用戶密碼

### 行程管理
1. 在左側選單中點擊「行程管理」可進入行程管理頁面
2. 查看當前旅程中的所有行程日
3. 點擊「創建新行程日」按鈕添加新的行程日
4. 選擇關聯的旅程、設置日期和天數
5. 添加多個活動，包括時間、地點和描述
6. 可以為活動選擇不同類別，如觀光景點、交通、餐飲等
7. 點擊現有行程日可查看和編輯詳情

### 交通管理
1. 在左側選單中點擊「交通管理」進入交通管理頁面
2. 選擇要管理的旅程，系統會顯示按行程日分組的交通項目
3. 點擊每個行程日的「添加交通」按鈕可添加新的交通項目
4. 填寫交通詳情，包括類型、出發/到達時間、地點、費用等
5. 對於連續交通（如轉機），可以使用「保存並添加下一段交通」功能
6. 已添加的交通項目會顯示在對應行程日下，並自動識別連續交通關係
7. 點擊編輯按鈕可修改交通項目，點擊刪除按鈕可移除不需要的交通項目

### 住宿管理
1. 在左側選單中點擊「住宿管理」進入住宿管理頁面
2. 選擇要管理的旅程，系統會顯示按行程日分組的住宿項目
3. 點擊「添加住宿」按鈕可添加新的住宿項目
4. 填寫住宿詳情，包括類型、入住/退房時間、地址、費用等
5. 選擇與住宿關聯的行程日，建立住宿與行程的關聯
6. 添加住宿設施列表，記錄所有可用的設施
7. 記錄住宿的聯絡方式和位置信息
8. 已添加的住宿項目會顯示在對應旅程下，點擊可查看詳細信息
9. 點擊編輯按鈕可修改住宿項目，點擊刪除按鈕可移除不需要的住宿項目

### 餐飲管理
1. 在左側選單中點擊「餐飲管理」進入餐飲管理頁面
2. 選擇要管理的旅程，系統會顯示按行程日分組的餐飲項目
3. 點擊每個行程日的「添加餐飲」按鈕可添加新的餐飲項目
4. 填寫餐飲詳情，包括餐廳名稱、類別、地址、預訂時間等
5. 記錄特殊飲食需求，如素食、無麩質、無堅果等
6. 添加推薦菜品列表，方便點餐參考
7. 輸入聯絡方式和位置信息，便於查找餐廳
8. 已添加的餐飲項目會顯示在對應行程日下，點擊可查看詳細信息
9. 點擊編輯按鈕可修改餐飲項目，點擊刪除按鈕可移除不需要的餐飲項目

### 證件管理
1. 在左側選單中點擊「證件管理」進入證件管理頁面
2. 系統提供兩個標籤頁：「個人證件」和「旅遊簽證」
3. 在個人證件標籤頁中，可以管理自己和同行人員的各類證件
4. 點擊「添加同行人員」按鈕可添加旅行同伴的基本資料
5. 點擊「添加個人證件」按鈕可添加新的證件，包括護照、身份證、駕照等
6. 選擇證件擁有者（自己或同行人員），填寫證件詳情
7. 上傳證件照片時，系統會自動加密保護，確保敏感資料安全
8. 系統會標記即將到期（90天內）的證件，提醒及時更新
9. 在旅遊簽證標籤頁中，可管理各國簽證及其狀態
10. 將簽證關聯到特定旅程，記錄申請狀態、批准日期、入境次數等詳細信息
11. 可以按照擁有者、證件類型或簽證狀態進行篩選
12. 所有證件和簽證都可以查看詳情、編輯和刪除

### 預算管理
1. 在左側選單中點擊「預算管理」進入預算管理頁面
2. 選擇要管理的旅程，系統會顯示該旅程的預算概況
3. 點擊「新增預算」按鈕為選定旅程創建預算計劃
4. 設定總預算金額、額外預算及貨幣類型
5. 添加多個預算分類（如交通、住宿、餐飲等），並分配預算金額
6. 點擊「新增支出」按鈕記錄實際或計劃中的支出
7. 系統自動計算各類別的預算使用情況，並提供視覺化進度條
8. 點擊「預算分析」查看詳細的支出統計和圖表
9. 可以按類別、日期等條件過濾支出記錄
10. 點擊「匯出CSV」將支出記錄匯出為電子表格格式

## 版本資訊

- **v1.2.0**：新增預算管理功能模組，支援旅程預算設定、分類預算配置、支出記錄、預算使用分析等
- **v1.1.9**：新增證件管理功能模組，支援個人和同行人員的證件與簽證管理，並提供照片加密保護
- **v1.1.8**：新增餐飲管理功能模組，支援多種餐飲類型、餐廳類別和特殊飲食需求管理
- **v1.1.7**：新增住宿管理功能模組，支援多種住宿類型、設施記錄和行程日關聯
- **v1.1.6**：新增交通管理功能模組，支援多種交通方式、連續交通安排和行程日關聯
- **v1.1.5**：新增行程管理功能模組，完成行程日創建和編輯，支援活動管理和時間安排
- **v1.1.3**：完成用戶管理模組，新增密碼管理功能，優化登入邏輯和數據持久化
- **v1.1.2**：修復表單頁面的類型錯誤，優化路由配置，完成基本功能開發
- **v1.1.1**：添加旅程詳情頁面，優化數據流
- **v1.1.0**：實現旅程表單、添加和編輯功能
- **v1.0.0**：初始版本，基本旅程列表和用戶驗證

## 貢獻指南

歡迎提交 Pull Request 和 Issue。請確保您的代碼符合專案的編碼規範，並添加適當的測試。

## 授權

本專案採用 MIT 授權 - 詳見 LICENSE 文件
